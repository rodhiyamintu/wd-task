<div class="wd-page wd-page-tabed">
    <div class="wd-page-title">
        <div class="wd-page-title-inner">
            <h4>Tasks</h4>
            <nav class="wd-breadcrumbs" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                    <li class="breadcrumb-item"><a [routerLink]="['/project']">Projects</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Tasks</li>
                </ol>
            </nav>
        </div>
        <div class="wd-page-title-control">
            <button class="btn btn-primary btn-rounded" [routerLink]="['/task/'+pid+'/add']">Add Task</button>
            <!-- <button class="btn btn-primary btn-rounded">Save</button> -->
        </div>
    </div>
    <div class="wd-page-body">

        <div class="wd-panel">
            <!-- <div class="wd-panel-header">
                <h4>
                    Panel Header
                </h4>
                <div class="wd-panel-control">
                    <button class="btn btn-primary btn-rounded">Add New</button>
                </div>
            </div> -->
            <div class="wd-panel-body">

                <p-table #dt1 [value]="tasks" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                    [rowsPerPageOptions]="[10,25,50]" [loading]="loading">
                    <ng-template pTemplate="header">
                        <tr>
                            <th width="20%" pSortableColumn="displayName">Title <p-sortIcon field="code"></p-sortIcon>
                            </th>
                            <th>Assigned To</th>
                            <th width="12%">Progress</th>
                            <th>Created By</th>
                            <th>Updated At</th>
                            <th width="8%">Action</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-t>
                        <tr>
                            <td>{{t.title}}</td>
                            <td>
                                <p-chip label="{{t.assignedName}}"></p-chip>
                            </td>
                            <td>
                                <p-progressBar [value]="t.progress"></p-progressBar>
                            </td>
                            <td>
                                <p-chip label="{{t.createdByName}}"></p-chip>
                            </td>
                            <td>
                                {{t.createdAt.seconds * 1000 | date:' LLL dd, yyyy hh:mm:aa'}}<br />
                                {{t.updatedAt.seconds * 1000 | date:' LLL dd, yyyy hh:mm:aa'}}
                            </td>
                            <td>
                                <button pButton pRipple icon="pi pi-pencil"
                                    class="p-button-rounded p-button-success p-mr-2"
                                    [routerLink]="['/task/'+t.pid+'/edit/'+ t.docId]" pTooltip="Edit"
                                    tooltipPosition="bottom"></button>
                                <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger"
                                    pTooltip="Delete" tooltipPosition="bottom"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>
        </div>

    </div>
</div>

<!-- <p-contextMenu [target]="project" [model]="items"></p-contextMenu> -->